---
title: Set Up
---

import Alert from 'src/components/alert'

We're so happy to have you here learning all about Gatsby, and in particular, with integrating Gatsby with Drupal as a headless CMS.

The central purpose of this first lab is to give everyone sufficient time to validate machine setup and get a local version of Gatsby and a headless Drupal instance created and running.

If you haven't already, *start* with the [Set Up and Validation instructions here](/set-up/).

Once your environment has been validated, we can get up and running!

## Setting up Drupal

<!-- TODO: Jesus -->

For this training, we will be proving a Drupal instance already pre-configured for each one of the attendees.

This Drupal instance will be running on Digital Ocean, so you do not have to worry about getting a Drupal site setup locally.

If you want to replicate the same Drupal installation running locally you should have the following dependencies loaded in your system.

## Drupal dependencies
* [git](https://git-scm.com/)
* [docker](https://www.docker.com/)
* [ahoy (ver 2)](https://github.com/ahoy-cli/ahoy)

## Drupal setup

```shell
# Clone repository
git clone git@github.com:weknowinc/drupal-boina.git

# Copy .env file
cp .env.dist .env

# Add hostname entry in your /etc/hosts file
127.0.0.1    drupal-boina.develop

# Start containers
ahoy up

# Install Composer dependencies
ahoy composer install

# Install Boina distribution
ahoy drupal boina:install
```

<Alert type="warn">Note: Getting a local Drupal instance is not required for this training. But we provided you this machine for you to try at home.</Alert>

## Running locally

Now that Drupal has been set-up _and_ our dependencies have been installed, we can get to work on Lab 1!

First, just to validate that content hasn't changed upstream (e.g. in the parent repo), we can sync with upstream.

<Alert type="info">If you haven't set up upstream, run: <code>git remote add upstream https://github.com/dschau/gatsby-drupal-blog</code></Alert>

```shell
git fetch upstream master
git reset --hard upstream/master
```

Next, change into the lab01 directory, like so:

```shell
cd labs/01-getting-started/
```

### Setting up environment variables

We use environment variables to encapsulate _secrets_ (values that we want exposed to our build process, but that we don't want prying ðŸ‘€ to be able to access). We use a tool `dotenv` to provide these to our build process.

```shell
cat .env.sample > .env.development
```

This will take the contents of `.env.sample` and pipe them to `.env.development`. If you open up this file in your editor, you will see the hard-coded environment variables, and what needs to be changed!

Open up this file and replace the environment variables with the values you obtained when setting up the Drupal instance.

<details>
  <summary>
    Sample .env.development file
  </summary>

  ```shell
  DRUPAL_USERNAME=your-usernmae
  DRUPAL_PASSWORD=hunter2
  ```
</details>

<Alert type="info">
  Note: you can check out `gatsby-config.js` for further info to see how these environment variables are used.
</Alert>

Almost ready! Now if you run

```shell
yarn start
```

you should be greeted with the following welcome screen. You have completed Lab One!

<!-- TODO: have them set up a component and import it -->

<!-- TODO: Insert Lab One Image -->

<Alert type="warn">Note: remember to exit out of the process (Ctrl + C) to close the local development server.</Alert>
